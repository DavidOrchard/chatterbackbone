<!--Copyright (C) 2013 David Orchard

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-->
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
  <link rel="stylesheet" href="css/app.css">
  <link rel="stylesheet" href="css/views/feedcontainer.css">
  <link rel="stylesheet" href="css/views/feeditem.css">
  <link rel="stylesheet" href="css/views/feeditemcomment.css">
</head>
<body>
  <body>
    <p>This is a demonstration of rendering a Salesforce.com chatter feed using backbone.js and require.js.  It is intended for my experimentation purposes only.  Other ideas: mobile (mobile boilerplate, jquery mobile, iscroll), Foundation, unit testing, integration with hootsuite dashboard, more cowbell, publisher, perf testing, app building using phonegap and/or trigger.io, perf enhancement in js, css compiler, offline, secure offline with salesforce.com smartstore. 
    <p><a href="/m">Mobile Site</a></p>
  <section id="feed">
    <P>Login to fetch a live chatter feed.  You may have to tap login again after succesfully logging in due to a simple redirect bug.</p>
    <button id="btnLogin" class="btnLogin">Login</button>
    <P>Prior to login, the feed below is a static prefetched feed.</p>
    <hr>
    <section id="feed-items-collection">
    </section>
    </section>
    <p style="clear:both">Some random thoughts: <ul>
      <li>having to cache bust to get .js updates is really awful for debugging.  adding debugger; statements then upload each bp is unusable.</li>
      <li>require.js behaves randomly on loading a js/newsfeedstatic.js file.  On localhost it loads but on Heroku the reference fails.  I'll load staticly for now</li>
      <li>the forcetk UI for doing the auth in a separate window then catching the reload URI seems broken.  For now, I'll do it inline and live with the too lengthy url</li>
      <li>Modularity and re-use across desktop/mobile is harder than it ought to be.  Adding a /m/index.html and a different main.js as mobile-main.js has the result that the mobile specific code like mobile-main can't be in a separate directory because the js references in main are all off on the dir structure.  Maybe there's a require.js equivalent of base href that can be passed in to a main?</li>
      <li>modularity with salesforce login is also harder than it ought to be.  Because the oauth redirect uri is hardcoded on the server in oauth2 (oauth_callback in oauth 1.0 is deprecated), you can't have a "/index.html" and a "/m/index.html" for the same endpoint.  Cookies and/or query params seem to be the solution. 
  
    <script src="js/newsfeedstatic.js"></script>
<script data-main="js/main" src="js/lib/require.js"></script>
</body>
</html>